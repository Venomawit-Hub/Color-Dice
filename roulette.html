<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Color Roulette Spinner</title>
<style>
  body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background: radial-gradient(circle, #0f1f3a, #060d1c);
    color: white;
    text-align: center;
    padding: 40px 20px;
  }
  h1 { font-size: 2rem; margin-bottom: 20px; }
  .wheels {
    display: flex;
    justify-content: center;
    gap: 20px;
    flex-wrap: wrap;
  }
  .wheel-wrapper {
    position: relative;
    width: 220px;
    height: 220px;
  }
  .pointer {
    position: absolute;
    bottom: 210px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 12px solid transparent;
    border-right: 12px solid transparent;
    border-top: 24px solid white;
    z-index: 10;
  }
  canvas {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: #222;
    box-shadow: 0 0 15px rgba(255, 255, 255, 0.1);
  }
  button {
    margin: 18px 5px;
    padding: 10px 20px;
    font-size: 16px;
    background: #23d5ab;
    border: none;
    border-radius: 8px;
    color: white;
    cursor: pointer;
    box-shadow: 0 0 10px #23d5ab;
  }
  .color-guide {
    margin-top: 20px;
    font-size: 16px;
  }
  .color-guide span { font-weight: bold; }
  .bottom-controls {
    margin-top: 25px;
  }
  /* Back button positioning */
  .back-btn {
    position: absolute;
    top: 10px;
    left: 10px;
  }
</style>
</head>
<body>

<!-- Back button -->
<div class="back-btn">
  <button onclick="window.history.back()">â¬… Back</button>
</div>

<h1>ðŸŽ¡Color Roulette</h1>

<!-- Spin button stays on top -->
<div>
  <button onclick="spinAll()">SPIN</button>
</div>

<!-- Wheels container -->
<div class="wheels" id="wheelsContainer"></div>

<!-- Color guide -->
<div class="color-guide">
  Possible colors are:
  <span style="color:#ff3b3b">Red</span>,
  <span style="color:#ff9800">Orange</span>,
  <span style="color:#ffeb3b">Yellow</span>,
  <span style="color:#4caf50">Green</span>,
  <span style="color:#2196f3">Blue</span> and
  <span style="color:#9c27b0">Purple</span>.
</div>

<!-- Add/Remove buttons moved to bottom -->
<div class="bottom-controls">
  <button onclick="addWheel()">âž• Add Wheel</button>
  <button onclick="removeWheel()">âž– Remove Wheel</button>
</div>

<script>
const colors = [
  { name: "Red", hex: "#ff3b3b", initial: "R" },
  { name: "Orange", hex: "#ff9800", initial: "O" },
  { name: "Yellow", hex: "#ffeb3b", initial: "Y" },
  { name: "Green", hex: "#4caf50", initial: "G" },
  { name: "Blue", hex: "#2196f3", initial: "B" },
  { name: "Purple", hex: "#9c27b0", initial: "P" }
];

let wheels = [];

function createWheel(canvasId) {
  const canvas = document.getElementById(canvasId);
  const ctx = canvas.getContext("2d");
  const slices = 12;
  const angle = (2 * Math.PI) / slices;
  const repeatedColors = Array.from({ length: slices }, (_, i) => colors[i % colors.length]);

  return {
    rotation: 0,
    draw(rotation = 0) {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.save();
      ctx.translate(canvas.width / 2, canvas.height / 2);
      ctx.rotate(rotation);
      for (let i = 0; i < slices; i++) {
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.arc(0, 0, canvas.width / 2, i * angle, (i + 1) * angle);
        ctx.fillStyle = repeatedColors[i].hex;
        ctx.fill();

        ctx.save();
        ctx.rotate(i * angle + angle / 2);
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        ctx.fillStyle = "white";
        ctx.font = "bold 24px Poppins";
        ctx.rotate(Math.PI / 2);
        ctx.fillText(repeatedColors[i].initial, 0, -canvas.width / 2.5);
        ctx.restore();
      }
      ctx.restore();
    },
    spin() {
      let startRotation = this.rotation;
      const totalRotations = Math.random() * 3 + 4;
      const duration = 3000;
      const startTime = performance.now();
      const easeOut = t => 1 - Math.pow(1 - t, 4);

      const animate = (now) => {
        const elapsed = now - startTime;
        const t = Math.min(elapsed / duration, 1);
        const eased = easeOut(t);
        this.rotation = startRotation + totalRotations * 2 * Math.PI * eased;
        this.draw(this.rotation);

        if (t < 1) {
          requestAnimationFrame(animate);
        }
      };

      requestAnimationFrame(animate);
    }
  };
}

function addWheel() {
  const container = document.getElementById("wheelsContainer");
  const index = wheels.length + 1;

  const wrapper = document.createElement("div");
  wrapper.className = "wheel-wrapper";

  const pointer = document.createElement("div");
  pointer.className = "pointer";

  const canvas = document.createElement("canvas");
  canvas.width = 400;
  canvas.height = 400;
  canvas.id = `wheel${index}`;

  wrapper.appendChild(pointer);
  wrapper.appendChild(canvas);
  container.appendChild(wrapper);

  const wheelObj = createWheel(canvas.id);
  wheelObj.draw();
  wheels.push(wheelObj);
}

function removeWheel() {
  if (wheels.length > 0) {
    wheels.pop();
    const container = document.getElementById("wheelsContainer");
    container.removeChild(container.lastChild);
  }
}

function spinAll() {
  wheels.forEach(wheel => wheel.spin());
}

// Start with 3 wheels
for (let i = 0; i < 3; i++) addWheel();
</script>
</body>
</html>
